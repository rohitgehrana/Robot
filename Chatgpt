from openai import OpenAI
import os
import pygame
import datetime


# Set your OpenAI API key as an environment variable
api_key = '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'
os.environ["OPENAI_API_KEY"] = api_key

#MEMORY HOUSE
user_conversation = [{"role": "system", "content": "Your name is Alfa and you are a human like robot whose work is to communicate with humans. You can remember names."}]

client = OpenAI()



#LOOP
while True:


    #USER PROMPT
    prompt = input("enter prompt: ")


    #MEMORIES HOUSE
    user_conversation.append(dict(role="user", content=prompt))



    #THOUGHTS HOUSE
    response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages= user_conversation
    )
    response_message = response.choices[0].message.content
    user_conversation.append(dict(role="assistant", content=response_message))

    print(response_message)








    #TEXT TO SPEECH CORNER
    response = client.audio.speech.create(
      model="tts-1",
      voice="alloy",
      input=response_message,
    )

    response.stream_to_file("output.mp3")


    import pygame

    # Initialize Pygame
    pygame.init()

    # Path to the MP3 file
    mp3_file_path = "output.mp3"

    # Create a Pygame mixer
    pygame.mixer.init()

    # Load the MP3 file
    sound = pygame.mixer.Sound(mp3_file_path)

    # Play the sound
    sound.play()

    # Wait for the sound to finish playing
    pygame.time.wait(int(sound.get_length() * 1000))  # Convert seconds to milliseconds








